<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gerenciar Professores</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        a { color: black; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body class="bg-light">

<div class="container mt-5">

    <h1 class="mb-4">Gerenciar Professores</h1>

    <div class="card shadow p-4">

        <h3>Novo Professor</h3>

        <form th:action="@{/admin/professores/salvar}" th:object="${professor}" method="post">

            <input type="hidden" th:field="*{id}" />
            <input type="hidden" th:field="*{usuario.id}" />

            <div class="mb-3">
                <label class="form-label">Nome:</label>
                <input type="text" class="form-control" th:field="*{usuario.nome}" placeholder="Digite o nome completo">
                <div class="text-danger" th:if="${#fields.hasErrors('usuario.nome')}" th:errors="*{usuario.nome}"></div>
            </div>

            <div class="mb-3">
                <label class="form-label">Telefone:</label>
                <input type="text" class="form-control" th:field="*{usuario.fone}" placeholder="(83) 99999-9999">
                <div class="text-danger" th:if="${#fields.hasErrors('usuario.fone')}" th:errors="*{usuario.fone}"></div>
            </div>

            <div class="mb-3">
                <label class="form-label">Login:</label>
                <input type="text" class="form-control" th:field="*{usuario.login}" placeholder="ex: maria@ifpb.edu.br">
                <div class="text-danger" th:if="${#fields.hasErrors('usuario.login')}" th:errors="*{usuario.login}"></div>
            </div>

            <div class="mb-3">
                <label class="form-label">Senha:</label>
                <input type="password" class="form-control" th:field="*{usuario.senha}" placeholder="Digite uma senha">
                <div class="text-danger" th:if="${#fields.hasErrors('usuario.senha')}" th:errors="*{usuario.senha}"></div>
            </div>

            <div class="mb-3">
                <label class="form-label">Matrícula:</label>
                <input type="text" class="form-control" th:field="*{matricula}" placeholder="Ex: 202612345678">
                <div class="text-danger" th:if="${#fields.hasErrors('matricula')}" th:errors="*{matricula}"></div>
            </div>

            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" th:field="*{coordenador}">
                <label class="form-check-label">É Coordenador?</label>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-success">Salvar</button>
                <a class="btn btn-secondary" th:href="@{/admin/professores}">Cancelar Edição</a>
            </div>

        </form>
    </div>

    <hr class="my-5"/>

    <h3 class="mb-3">Professores Cadastrados</h3>

    <table class="table table-striped table-hover shadow">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Matrícula</th>
            <th>Login</th>
            <th>Telefone</th>
            <th>Coordenador</th>
            <th>Ações</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="professor : ${listaDeProfessores}">
            <td th:text="${professor.id}"></td>
            <td th:text="${professor.usuario.nome}"></td>
            <td th:text="${professor.matricula}"></td>
            <td th:text="${professor.usuario.login}"></td>
            <td th:text="${professor.usuario.fone}"></td>
            <td th:text="${professor.coordenador} ? 'Sim' : 'Não'"></td>

            <td class="d-flex gap-2">
                <a class="btn btn-primary btn-sm"
                   th:href="@{/admin/professores/editar/{id}(id=${professor.id})}">
                    Editar
                </a>

                <form th:action="@{/admin/professores/deletar/{id}(id=${professor.id})}"
                      method="post"
                      onsubmit="return confirm('Tem certeza que deseja excluir este professor?');">
                    <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <a class="btn btn-dark mt-3" th:href="@{/admin/home-admin}">Voltar ao Painel</a>

</div>

</body>
</html>